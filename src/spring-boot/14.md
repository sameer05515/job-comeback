### âœ… Lifecycle of a Spring Boot Application (Step-by-Step)

---

### ðŸ”¹ **1. App Initialization Starts**

```bash
java -jar app.jar
```

* JVM launches the application.
* Main class runs `SpringApplication.run(...)`.

---

### ðŸ”¹ **2. Bootstrap Phase**

```java
@SpringBootApplication
public class MyApp {
    public static void main(String[] args) {
        SpringApplication.run(MyApp.class, args);
    }
}
```

* `@SpringBootApplication` triggers:

  * `@Configuration` â†’ config class
  * `@EnableAutoConfiguration` â†’ auto-config logic
  * `@ComponentScan` â†’ scans for beans

---

### ðŸ”¹ **3. Application Context Creation**

* Loads:

  * Bean definitions (`@Component`, `@Service`, `@Repository`, etc.)
  * Auto-configuration classes
  * External configs (`application.properties` / `.yml`)

---

### ðŸ”¹ **4. Bean Instantiation & Dependency Injection**

* All beans are:

  * Created
  * Dependencies are injected (`@Autowired`, constructor)
  * Initialized (`@PostConstruct`, `InitializingBean`)

---

### ðŸ”¹ **5. Lifecycle Hooks Executed**

If implemented:

* `CommandLineRunner.run(...)`
* `ApplicationRunner.run(...)`

---

### ðŸ”¹ **6. Web Server Starts (If Web App)**

* Embedded **Tomcat / Jetty / Undertow** starts
* App listens on port (default `8080`)
* REST endpoints ready to serve

---

### ðŸ”¹ **7. Application is Running**

* Ready to handle requests
* Actuator endpoints active (if enabled)

---

### ðŸ”¹ **8. Shutdown Phase (on `Ctrl+C` / SIGTERM)**

* `@PreDestroy` or `DisposableBean.destroy()` executed
* Beans destroyed
* Context closed gracefully

---

### âœ… Summary Line for Interview:

> "Spring Boot app lifecycle includes bootstrapping, context creation, bean initialization, optional runners, embedded server startup, and graceful shutdown with lifecycle callbacks."

---

Type:

* `lifecycle-hooks` â†’ full list of init/destroy annotations
* `custom-startup-logic` â†’ where to put startup code
* `event-lifecycle` â†’ use `ApplicationListener` for lifecycle events


---
---
# lifecycle-hooks

### âœ… Spring Boot Lifecycle Hooks â€“ Init & Destroy Methods

Spring provides multiple ways to run **custom logic** during **startup** and **shutdown** of your application.

---

### ðŸ”¹ **Startup Hooks (Init)**

| Hook                                    | When It Runs                             | Example                       |
| --------------------------------------- | ---------------------------------------- | ----------------------------- |
| `@PostConstruct`                        | After bean initialization                | âœ… Good for setup logic        |
| `InitializingBean.afterPropertiesSet()` | After all properties set                 | Alternate to `@PostConstruct` |
| `CommandLineRunner.run()`               | After app context is ready (args passed) | For CLI-style logic           |
| `ApplicationRunner.run()`               | Same as above but with structured args   | For argument parsing          |

---

### âœ… Example: `@PostConstruct`

```java
@Component
public class MyBean {

    @PostConstruct
    public void init() {
        System.out.println("Bean initialized.");
    }
}
```

---

### âœ… Example: `CommandLineRunner`

```java
@Component
public class MyRunner implements CommandLineRunner {
    public void run(String... args) {
        System.out.println("App started with args: " + Arrays.toString(args));
    }
}
```

---

### ðŸ”¹ **Shutdown Hooks (Destroy)**

| Hook                       | When It Runs                   | Purpose                      |
| -------------------------- | ------------------------------ | ---------------------------- |
| `@PreDestroy`              | Before bean is destroyed       | âœ… For cleanup logic          |
| `DisposableBean.destroy()` | When context is closed         | Alternative to `@PreDestroy` |
| `SmartLifecycle.stop()`    | For advanced shutdown sequence | Controlled stop order        |
| `ContextClosedEvent`       | Listen to shutdown event       | App-level shutdown tasks     |

---

### âœ… Example: `@PreDestroy`

```java
@Component
public class MyBean {

    @PreDestroy
    public void cleanup() {
        System.out.println("Bean is being destroyed.");
    }
}
```

---

### âœ… Summary Line for Interviews:

> "`@PostConstruct` and `@PreDestroy` are used for bean-level init and cleanup. `CommandLineRunner` and `ApplicationRunner` execute after context is ready. All support custom startup/shutdown behavior."

---

Type:

* `event-lifecycle` â†’ to use events like `ApplicationStartedEvent`
* `runner-condition` â†’ to run hooks conditionally
* `ordered-runner` â†’ prioritize multiple runners
