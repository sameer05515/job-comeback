
# Find students who scored the maximum marks in each subject from the marks table.

```sql

-- Find students who scored the maximum marks in each subject from the marks table.


CREATE TABLE marks (
  id INT,
  student VARCHAR(50),
  subject VARCHAR(50),
  score INT
);

INSERT INTO marks VALUES
(1, 'Clark', 'Math', 88),
(2, 'Dave', 'Math', 92),
(3, 'Ava', 'Math', 85),
(4, 'Clark', 'Science', 80),
(5, 'Dave', 'Science', 75),
(6, 'Ava', 'Science', 90),
(7, 'Champa', 'Science', 92),
(8, 'Munna', 'Science', 92);


select * from marks;


-- Using correlated subquery
SELECT m.student, m.subject, m.score
FROM marks m
WHERE m.score = (
   SELECT MAX(m2.score)
   FROM marks m2
   WHERE m2.subject = m.subject
);

-- üëç here‚Äôs the JOIN version (no correlated subquery)

SELECT m.student, m.subject, m.score
FROM marks m
JOIN (
   SELECT subject, MAX(score) AS max_score
   FROM marks
   GROUP BY subject
) t 
  ON m.subject = t.subject 
 AND m.score = t.max_score;


-- a window function version using RANK() (or DENSE_RANK())

SELECT student, subject, score
FROM (
    SELECT 
        student,
        subject,
        score,
        RANK() OVER (PARTITION BY subject ORDER BY score DESC) AS rnk
    FROM marks
) t
WHERE rnk = 1;


```