
# List all students who scored above class average in marks table.

```sql

-- List all students who scored above class average in marks table.

-- create table
CREATE TABLE STUDENT (
  id INTEGER PRIMARY KEY,
  name TEXT NOT NULL,
  score INTEGER
);

INSERT INTO STUDENT VALUES (1, 'Clark',88);
INSERT INTO STUDENT VALUES (2, 'Rajan',85);
INSERT INTO STUDENT VALUES (3, 'Anjum',83);
INSERT INTO STUDENT VALUES (4, 'Champa',92);
INSERT INTO STUDENT VALUES (5, 'Jaggu',72);
INSERT INTO STUDENT VALUES (6, 'Sillu',32);


select avg(score) "Avg score" from STUDENT;


SELECT * from STUDENT s where s.score> (select avg(score) from STUDENT);


```

```
Output:

+-----------+
| Avg score |
+-----------+
|   75.3333 |
+-----------+
+----+--------+-------+
| id | name   | score |
+----+--------+-------+
|  1 | Clark  |    88 |
|  2 | Rajan  |    85 |
|  3 | Anjum  |    83 |
|  4 | Champa |    92 |
+----+--------+-------+
```


## a version with a CTE so you can display the average score alongside each student

Perfect Prem ðŸ‘ Hereâ€™s a **CTE (Common Table Expression)** version so you can show the **average score** alongside each student who scored above average.

---

### ðŸ”§ Query with CTE

```sql
WITH class_avg AS (
    SELECT AVG(score) AS avg_score
    FROM STUDENT
)
SELECT s.id, s.name, s.score, c.avg_score
FROM STUDENT s
CROSS JOIN class_avg c
WHERE s.score > c.avg_score;
```

---

### âœ… Output with your data

| id | name   | score | avg\_score |
| -- | ------ | ----- | ---------- |
| 1  | Clark  | 88    | 75.33      |
| 2  | Rajan  | 85    | 75.33      |
| 3  | Anjum  | 83    | 75.33      |
| 4  | Champa | 92    | 75.33      |

---

ðŸ‘‰ Advantage of this approach:

* Keeps average computed only **once** (clean & efficient).
* Easy to add more conditions (e.g., above average by dept, by batch, etc.).

Do you want me to also prepare a version that shows **all students + whether they are above/below average**?
