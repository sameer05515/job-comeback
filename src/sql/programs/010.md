
# List customers who purchased in January but not in February from the orders table.

```sql


-- List customers who purchased in January but not in February from the orders table.

-- create table
CREATE TABLE ORDERS (
  orderId INTEGER PRIMARY KEY,
  customerName TEXT NOT NULL,
  orderDate DATE NOT NULL
);

-- insert sample data
INSERT INTO ORDERS VALUES (1, 'Clark',   '2025-01-05'); -- Jan
INSERT INTO ORDERS VALUES (2, 'Clark',   '2025-02-10'); -- Feb
INSERT INTO ORDERS VALUES (3, 'Dave',    '2025-01-12'); -- Jan only
INSERT INTO ORDERS VALUES (4, 'Ava',     '2025-01-20'); -- Jan
INSERT INTO ORDERS VALUES (5, 'Ava',     '2025-02-15'); -- Feb
INSERT INTO ORDERS VALUES (6, 'Champa',  '2025-01-25'); -- Jan only
INSERT INTO ORDERS VALUES (7, 'John',    '2025-03-02'); -- March

select * from ORDERS;


-- NOT IN 

SELECT DISTINCT o.customerName
FROM ORDERS o
WHERE MONTH(o.orderDate) = 1
  AND o.customerName NOT IN (
      SELECT customerName
      FROM ORDERS
      WHERE MONTH(orderDate) = 2
  );
  
-- NOT EXISTS
  
SELECT DISTINCT o.customerName
FROM ORDERS o
WHERE MONTH(o.orderDate) = 1
  AND NOT EXISTS (
      SELECT 1
      FROM ORDERS x
      WHERE x.customerName = o.customerName
        AND MONTH(x.orderDate) = 2
  );

```



Perfect üëç Let‚Äôs solve your **‚Äúcustomers who purchased in January but NOT in February‚Äù** problem.

We‚Äôll use the `ORDERS` table we created.

---

## ‚úÖ Using `NOT IN`

```sql
SELECT DISTINCT o.customerName
FROM ORDERS o
WHERE MONTH(o.orderDate) = 1
  AND o.customerName NOT IN (
      SELECT customerName
      FROM ORDERS
      WHERE MONTH(orderDate) = 2
  );
```

---

## ‚úÖ Using `NOT EXISTS`

```sql
SELECT DISTINCT o.customerName
FROM ORDERS o
WHERE MONTH(o.orderDate) = 1
  AND NOT EXISTS (
      SELECT 1
      FROM ORDERS x
      WHERE x.customerName = o.customerName
        AND MONTH(x.orderDate) = 2
  );
```

---

### ‚úÖ Expected Output with your sample data

| customerName |
| ------------ |
| Dave         |
| Champa       |

---

üëâ **Rule of thumb:**

* `NOT IN` is concise but fails if subquery can return `NULL`.
* `NOT EXISTS` is safer and usually preferred.

Do you want me to also show you a **JOIN-based approach** (Jan customers LEFT JOIN Feb customers)?
