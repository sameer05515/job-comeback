# Write a query to return all customer count having duplicate email and phone values


> in customer table, id, email and phone fields.
> 
> email and phone values could be duplicated.
>
> write sql query to count customers having duplicate email and phone

Here's the SQL query to **count customers having duplicate `email` and duplicate `phone`** in the `customer` table:

```sql
SELECT COUNT(*) AS duplicate_count
FROM customer c
WHERE email IN (
    SELECT email
    FROM customer
    GROUP BY email
    HAVING COUNT(*) > 1
)
AND phone IN (
    SELECT phone
    FROM customer
    GROUP BY phone
    HAVING COUNT(*) > 1
);
```

### âœ… Explanation:

* First subquery finds `email`s that occur more than once.
* Second subquery finds `phone`s that occur more than once.
* The outer query filters `customer` records that match both conditions.

Let me know if you want to **list the actual duplicate records** instead of just count.


---
---

# list the actual duplicate records instead of just count.

To **list the actual duplicate customer records** where both `email` and `phone` are duplicated, use this SQL query:

```sql
SELECT *
FROM customer c
WHERE email IN (
    SELECT email
    FROM customer
    GROUP BY email
    HAVING COUNT(*) > 1
)
AND phone IN (
    SELECT phone
    FROM customer
    GROUP BY phone
    HAVING COUNT(*) > 1
)
ORDER BY email, phone;
```

### ðŸ” What this shows:

* All `customer` rows where:

  * Their `email` appears more than once **and**
  * Their `phone` appears more than once.

If you'd like to **group them** by duplicate `email` and `phone`, try this version:

```sql
SELECT email, phone, GROUP_CONCAT(id) AS customer_ids, COUNT(*) AS count
FROM customer
GROUP BY email, phone
HAVING COUNT(*) > 1;
```

This shows which `email + phone` combinations are duplicated and the IDs of the customers sharing them.

Let me know which output format you prefer.
