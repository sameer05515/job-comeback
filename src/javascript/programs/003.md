# Write a function to flatten a nested array of arbitrary depth using ES6 features.

Here’s one clean ES6+ solution using **recursion + `reduce`**:

```javascript
// Flatten nested array of arbitrary depth
const flatten = (arr) =>
  arr.reduce(
    (acc, val) => acc.concat(Array.isArray(val) ? flatten(val) : val),
    []
  );

// Example
console.log(flatten([1, [2, [3, [4, 5]]], 6])); 
// [1, 2, 3, 4, 5, 6]
```

---

Or, if your environment supports **`.flat(Infinity)`**:

```javascript
const flatten = (arr) => arr.flat(Infinity);

console.log(flatten([1, [2, [3, [4, 5]]], 6]));
// [1, 2, 3, 4, 5, 6]
```

---

Do you want me to also give you an **iterative stack-based solution** (without recursion)?

---
---

# an **iterative stack-based solution** (without recursion)

Got it 👍
Here’s the **iterative stack-based solution** (no recursion):

```javascript
// Iterative flatten using stack
const flatten = (arr) => {
  const stack = [...arr];   // copy input
  const result = [];

  while (stack.length) {
    const next = stack.pop();

    if (Array.isArray(next)) {
      stack.push(...next);   // expand array elements back into stack
    } else {
      result.push(next);
    }
  }

  return result.reverse();  // reverse because we popped from end
};

// Example
console.log(flatten([1, [2, [3, [4, 5]]], 6]));
// [1, 2, 3, 4, 5, 6]
```

---

⚡This avoids recursion and works for arbitrarily deep arrays.

Want me to also show a **generator-based lazy flatten** version (so you can iterate values one by one)?

